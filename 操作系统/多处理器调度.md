## 1. 多处理器调度设计问题
- #### 把进程分配到处理器
假设多处理器的结构一致，没有哪个处理器在物理性能上占有优势，那么可以把处理器视为一个资源池，并按照要求把进程分配到相应的处理器

如果一个进程从被激活到完成，一直被分配到同一个处理器，那么就需要**为每个处理器维护一个专门的短程队列**。对于所有的进程，处理器的分配只进行一次，因此调度的开销较小。但缺点也明显，可能会出现一个处理器空闲，而另一个处理器积压许多任务

因此可以将每个处理器的短程队列改为**所有处理器的公共全局队列，所有进程都进入这个队列中调度**。基于这种方案，在一个进程的生命周期中可能会被调度到不同的处理器中运行。而所有处理器都能得到进程的上下文信息

多处理器之间存在**主从式关系**与**对等式关系**
**主从式关系**：操作系统的核心功能总是在某个特定的处理器上运行，其他处理器可能仅用于执行用户程序。主处理器负责调度作业以及回应从处理器的各种服务请求。但缺点明显，主处理器的失败会导致整个系统的崩溃、主处理器可能会成为性能瓶颈
**对等式关系**：操作系统能在任何一个处理器上执行。每个处理器从可用进程池中进行自调度，这种关系增加了操作系统的复杂性

- #### 在单处理器上使用多道程序设计
单处理器能在多个进程间切换，以达到较高的利用率和更好的性能。对于多处理器系统，当多个处理器可用时，要求每个处理器尽可能忙就不再那么重要。相反需要更加关注为应用提供最好的平均性能

- #### 一个进程的实际分派
对于多处理器，使用复杂的单处理器调度策略可能会起到相反的效果，使用比较简单的方法可能会更有效且开销较低

## 2. 进程调度

## 3. 线程调度
在单处理器中，线程可用作辅助构造程序，并在处理过程中重叠执行IO。由于线程切换的系统开销远小于进程切换的系统开销，因此可以用很少的代价实现这些优点

在多处理器系统中，线程的能力得到更好的体现，能真正实现并行性

多处理器中的线程调度存在4中突出的调度策略：
1. **负载分配**：进程不分配到某个特定的处理器。系统维护一个就绪线程的全局队列，只要处理器空闲就选择一个线程调度执行

存在三种不同的负载分配方案：
- **先来先服务FCFS**
- **最少线程数优先**：一个作业包含的未调度线程数量最少，则给它指定最高的优先级。具有相同优先级的队列按作业到达的顺序排队
- **可抢占的最少线程数优先**

	负载分配存在以下缺点：
	1. 全局就绪线程队列需要实现互斥同步，多个处理器同时访问全局队列可能会造成性能瓶颈
	2. 被抢占的线程可能不在同一处理器上恢复执行，每个处理器配备一个本地高速缓存，缓存的效率可能会低
	3. 若所有线程被视为一个公共的线程池，那一个程序的所有线程不可能都同时访问处理器。如果该程序的线程需要高度合作，那么处理器需要进程切换，这样会导致性能下降
	
	针对简单负载分配的缺点，存在一种改进的方案：操作系统为每个处理器维护一个本地运行队列和一个共享的全局运行队列，本地运行队列供临时绑定在某个特定处理器上的进程使用。本地运行队列中被绑定的线程优先于未被绑定的线程

2. **组调度**：一组相关的线程基于一对一的原则，同时调度到一组处理器上运行
	组调度更偏向需要高度合作的线程，降低处理器进程切换的开销，但如果在一对一的情况下，该组线程数远小于该组处理器数，则会造成大部分的处理器空闲

3. **专用处理器分配**：一个程序任务执行过程中，该程序中的线程分配给一组处理器，处理器的数量与程序中线程的数量相等。程序终止则该组处理器返回处理器资源池，等待下一次的分配
 
4. **动态调度**：执行期间，进程中线程数量可以改变