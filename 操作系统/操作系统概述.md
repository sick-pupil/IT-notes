## 操作系统概述

<img src="D:\Project\IT notes\操作系统\img\计算机硬件和软件结构.jpg" style="width:600px;height:400px;" />

操作系统拥有的三种接口：
1. 指令系统体系结构ISA
2. 应用程序二进制接口ABI
3. 应用程序编程接口API

操作系统提供几个方面的服务：
1. 程序开发
2. 程序运行
3. IO设备访问
4. 文件访问控制
5. 系统访问
6. 错误检测和响应
7. 记账

<img src="D:\Project\IT notes\操作系统\img\操作系统作为资源管理器.jpg" style="width:600px;height:500px;" />

操作系统的发展：
1. 串行处理
2. 简单批处理系统：通过监控程序软件使用户不再直接访问机器，用户把卡片或磁带中的作业提交给计算机操作员，由操作员把作业顺序组织成一批，并将整个批作业放在输入设备上，供监控程序使用。每个作业完成后控制权返回监控程序，监控程序再加载下一个作业
<div align=center>
<img src="D:\Project\IT notes\操作系统\img\关于常驻监控程序的内存布局.jpg" style="width:300px;height:500px;" />
</div>
3. 多道批处理系统：内存空间可以保存操作系统和若干用户程序，当某个用户程序被阻塞，则处理器可以切换其他未被阻塞的程序运行
<div align=center>
<img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbkimg.cdn.bcebos.com%2Fpic%2F810a19d8bc3eb135c5c63411a41ea8d3fd1f4413&refer=http%3A%2F%2Fbkimg.cdn.bcebos.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1650387297&t=8fc460a46e56898220c05a9a057c1167">
</div>

4. 分时系统：除了处理器可同时处理多个批作业，还可用于处理多个交互作业，由于多个用户分享处理器时间，因而也称为分时（分时系统中，多个用户可以通过终端同时访问系统，由操作系统控制每个用户程序以较短时间为单位交替执行）。系统时钟以固定速度产生中断，每个时钟中断处，操作系统恢复控制权，并将处理器分配给另一用户（简称时间片）
<div align=center>
<img src="D:\Project\IT notes\操作系统\img\CTSS操作.jpg">
</div>

进程定义：
1. 一个正在执行的程序
2. 计算机中正在运行的程序的一个实例
3. 可以分配给处理器并由处理器执行的一个实体
4. 由单一顺序的执行线索、一个当前状态和一组相关的系统资源所描述的活动单元

进程分为三部分：
1. 一段可执行的程序
2. 程序所需要的相关数据（变量、工作空间、缓冲区等）
3. 程序的执行上下文

执行上下文又称进程状态，是操作系统用来管理和控制进程所需的内部数据。上下文是与进程分开的，这种操作系统信息是不允许被进程直接访问得到的。上下文包括操作系统管理进程及处理器正确执行进程所需要的所有信息：包括各种处理器寄存器的内容，如程序计数器和数据寄存器；还包括操作系统使用的信息，如进程优先级及进程是否存在等待特定IO事件的完成。

进程存在于内存的某个部分，即给每个进程分配一块存储器区域，并且在由操作系统建立和维护的进程表中进行记录。**进程表**包含记录每个进程的表项，表项内容包括指向包含进程的存储块地址的指针，还包括该进程的部分或全部执行上下文（执行上下文可存放别处也可与进程一起）。
<div align=center>
<img src="D:\Project\IT notes\操作系统\img\典型的进程实现方法.jpg">
</div>

操作系统担任五个基本存储器管理责任：
1. 进程隔离
2. 自动分配和管理
3. 支持模块化程序设计
4. 保护和访问控制
5. 长期存储

操作系统使用虚存和文件系统机制来满足这些要求。文件系统实现了长期存储，在一个有名字的对象中保存信息，这个对象称为文件。
虚存机制允许程序从逻辑角度访问存储器，不需考虑物理内存上的可用空间数量。由于进程大小不同，处理器需要进行进程切换，存储器需要不断载入换出进程，因此引入分页系统。进程由若干固定大小的页组成。程序通过虚地址访问字，虚地址由页号和页中偏移量组成（分页系统提供了程序中使用的虚地址和内存中的实地址之间的动态映射）。
一个进程所有页都保留在磁盘中，进程执行时一部分页在内存中，若需要访问的某一页不在内存，则安排载入缺页。

操作系统中维护着多个队列，每个队列代表等待某些资源的进程的简单列表：
1. 短程队列：在内存中并等待处理器可用的随时准备运行的进程组成。调度由分派器决定，常用策略为时间片轮转以及分配进程优先级进行等级调度
2. 长程队列：等待使用处理器的新作业的列表，操作系统通过把长程队列中的作业转移到短程队列中实现往系统中添加作业
3. IO队列：等待该IO设备的进程列表